;;;===============
;;;  WorldScheme
;;;===============
;;;
;;;; World Remote Server Implementation
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2016
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.server.remote.implementation jazz


(import (world)
        (world.autoload)
        (world.syntax (phase syntax))
        (world.task))


(class World-Remote-Server extends Object
  
  
  (method public (client-enter client player-name player-avatar)
    (with-task-mutex
      (lambda ()
        (client-enter~ (current-tier) client player-name player-avatar))))
  
  
  (method public (client-exit client player-name)
    (with-task-mutex
      (lambda ()
        (client-exit~ (current-tier) client player-name))))
  
  
  (method public (client-update client changes)
    (with-task-mutex
      (lambda ()
        (client-update~ (current-tier) client changes))))
  
  
  (method public (client-debug client arguments)
    (with-task-mutex
      (lambda ()
        (client-debug~ (current-tier) client arguments))))
  
  
  (method public (retrieve-region region-x region-z)
    (with-task-mutex
      (lambda ()
        (retrieve-region~ (current-tier) region-x region-z))))
  
  
  (method public (retrieve-chunk region-x region-z chunk-x chunk-z chunk-digest)
    (with-task-mutex
      (lambda ()
        (retrieve-chunk~ (current-tier) region-x region-z chunk-x chunk-z chunk-digest))))
  
  
  (method public (register-literal literal)
    (with-task-mutex
      (lambda ()
        (register-literal~ (current-tier) literal))))
  
  
  (method public (registered-id id)
    (with-task-mutex
      (lambda ()
        (registered-id~ (current-tier) id))))))
