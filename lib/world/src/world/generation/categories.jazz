;;;===============
;;;  WorldScheme
;;;===============
;;;
;;;; World Generation Categories
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2016
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):
;;;    Edouard Hebert


(module world.generation.categories jazz


(import (jazz.cairo)
        (jazz.geometry)
        (jazz.graphic)
        (jazz.io)
        (jazz.json)
        (jazz.opengl.glew)
        (jazz.syntax (phase syntax))
        (jazz.time)
        (profiler)
        (world)
        (world.album)
        (world.area)
        (world.atlas)
        (world.audio)
        (world.autoload)
        (world.block)
        (world.chunk)
        (world.configure)
        (world.creature)
        (world.draw)
        (world.dye)
        (world.entity)
        (world.face)
        (world.foreign)
        (world.generate)
        (world.geometry)
        (world.history)
        (world.homogeneous)
        (world.index)
        (world.info)
        (world.interface.inventory)
        (world.interface.sign)
        (world.light-syntax)
        (world.lighting)
        (world.material)
        (world.mesh)
        (world.model)
        (world.models)
        (world.polygon)
        (world.profiling)
        (world.quad)
        (world.quad-texture)
        (world.region)
        (world.render)
        (world.renderers)
        (world.section)
        (world.sector)
        (world.settings)
        (world.support)
        (world.syntax (phase syntax))
        (world.tag)
        (world.task)
        (world.template)
        (world.texture)
        (world.triangle))


;;;
;;;; Category
;;;


(class Block-Category extends Object
  
  
  (slot name    getter generate)
  (slot rank    getter generate)
  (slot texture getter generate)
  
  
  (method override (initialize name rank texture)
    (set! name~self name)
    (set! rank~self rank)
    (set! texture~self texture)))


(definition package block-categories
  (make-table test: eq?))

(definition (register-block-category name (rank: rank #f) (texture: texture #f))
  (let ((category (new Block-Category name rank texture)))
    (table-set! block-categories name category)
    category))


(definition public (name->block-category name)
  (table-ref block-categories name))


(define-block-category building       rank:  0 texture: 405)
(define-block-category decoration     rank:  1 texture: 338)
(define-block-category redstone       rank:  2 texture: 331)
(define-block-category invalid        rank:  2 texture: 377)
(define-block-category waiting        rank:  4 texture: 289)
(define-block-category sloped         rank:  9 texture: 265)


;;;
;;;; Kind
;;;


(class Block-Kind extends Object
  
  
  (slot name getter generate)
  (slot rank getter generate)
  
  
  (method override (initialize name rank)
    (set! name~self name)
    (set! rank~self rank)))


(definition package block-kinds
  (make-table test: eq?))

(definition (register-block-kind name (rank: rank #f))
  (let ((kind (new Block-Kind name rank)))
    (table-set! block-kinds name kind)
    kind))


(definition public (name->block-kind name)
  (table-ref block-kinds name))


;; building
(define-block-kind cube           rank: 0)
(define-block-kind slab           rank: 1)
(define-block-kind stairs         rank: 2)
(define-block-kind glass          rank: 3)
(define-block-kind snow           rank: 4)
(define-block-kind ice            rank: 5)
(define-block-kind ore            rank: 6)

;; decoration
(define-block-kind torch          rank: 0)
(define-block-kind fire           rank: 1)
(define-block-kind web            rank: 2)
(define-block-kind vegetation     rank: 3)
(define-block-kind leaves         rank: 4)
(define-block-kind veggieblock    rank: 5)
(define-block-kind liquid         rank: 6)
(define-block-kind signs          rank: 7)
(define-block-kind fence          rank: 8)
(define-block-kind bars           rank: 9)
(define-block-kind ladder         rank: 10)
(define-block-kind transportation rank: 11)
(define-block-kind portal         rank: 12)
(define-block-kind cake           rank: 13)

;; redstone
(define-block-kind power          rank: 0)
(define-block-kind redstonetorch  rank: 1)
(define-block-kind transmission   rank: 2)
(define-block-kind mechanism      rank: 3))
