;;;===============
;;;  WorldScheme
;;;===============
;;;
;;;; World Remote Stubs
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2016
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.stub jazz


(import (jazz.jrm.syntax (phase syntax))
        (jazz.jrm))


;;;
;;;; Master
;;;


(remotable-stub World-Remote-Master
  
  
  (method public exec (slave-setup slave cookie))
  (method public exec (slave-ready slave cookie)))


;;;
;;;; Client
;;;


(remotable-stub World-Remote-Client
  
  
  (method public post (server-entered client-id client-no character-name character-avatar character-script player-id player-position player-lookat player-script))
  (method public post (server-exited character-name))
  (method public post (server-update sent changes))
  (method public post (server-audio bytes))
  (method public post (server-video bytes))
  (method public post (server-message sender kind message))
  (method public post (server-protocol protocol))
  (method public post (detach-client))
  (method public post (pause-client))
  (method public post (unpause-client))
  (method public post (goto-client time))
  (method public post (camera-client pos lookat))
  (method public post (protocol-client simulate?))
  (method public post (position-client rect))
  (method public post (restore-client)))


;;;
;;;; Server
;;;


(remotable-stub World-Remote-Server
  
  
  (method public call (client-enter client character-name character-avatar character-script))
  (method public exec (client-exit client character-name))
  (method public post (client-alive client))
  (method public post (client-message client kind recipient message))
  (method public post (client-log client time message))
  (method public post (processor-log processor time message))
  (method public call (client-connected-player client no))
  (method public call (client-connected-players client))
  (method public call (client-available-templates client))
  (method public call (client-available-zone-base client from))
  (method public call (client-available-zone-base? client base))
  (method public call (client-create-zone client from base))
  (method public call (client-available-zones client))
  (method public call (client-change-zone client zone))
  (method public call (retrieve-asset path))
  (method public call (register-literal literal))
  (method public call (registered-id id))
  (method public post (tile-server))
  (method public post (restore-server)))


;;;
;;;; Processor
;;;


(remotable-stub World-Remote-Processor
  
  
  (method public exec (processor-setup master cookie server server-name zone worker))
  (method public post (processor-quit))
  (method public call (client-join client client-id client-no character-name character-avatar character-script))
  (method public exec (client-leave client character-name))
  (method public post (client-update client sent changes))
  (method public post (client-audio client bytes))
  (method public post (client-video client bytes))
  (method public call (retrieve-region region-index))
  (method public call (retrieve-chunk region-index chunk-index chunk-digest))
  (method public call (retrieve-entity id)))


;;;
;;;; Worker
;;;


(remotable-stub World-Remote-Worker
  
  
  (method public call (process-setup crashes cache optimize? debug? repositories))
  (method public call (process-repositories repositories))
  (method public call (process-unit mode feedback? time? unit-name))
  (method public call (process-script mode path))
  (method public call (process-evaluate mode feedback? syntax str container line col evaluation-mode))
  (method public call (process-run mode feedback? syntax str container line col evaluation-mode))
  (method public call (process-console unit-name expr))
  (method public call (process-hide))
  (method public post (process-quit))))
