;;;==============
;;;  JazzScheme
;;;==============
;;;
;;;; Gravity Wells
;;;


(module world.gravity jazz


(import (jazz.jml)
        (jazz.graphic)
        (jazz.graphic.opengl.glew)
        (world)
        (world.autoload)
        (world.draw)
        (world.element)
        (world.foreign)
        (world.gadget)
        (world.geometry)
        (world.object)
        (world.shader)
        (world.syntax (phase syntax)))


;;;
;;;; Gravity
;;;


(class Gravity extends Gadget
  
  
  (property pull <fl> initialize .01 accessors generate)
  
  
  (method override (prepare rest)
    (nextmethod rest)
    (set-size (vertex 5. 5. 5.))
    (set! color {Color Red})
    (set-visible? (get-draw-gadgets?~ (current-world))))
  
  
  (method override (print output readably)
    (print-unreadable self output
      (lambda (output)
        (format output "{r precision: 1}" pull))))
  
  
  (method override (draw)
    (draw-sphere (get-x) (get-y) (get-z) 2.5 26 52 {Color Ochre}))))
