;;;===============
;;;  WorldScheme
;;;===============
;;;
;;;; World Games
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2015
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.game jazz


(import (jazz.application)
        (world)
        (world.autoload)
        (world.interface.documents)
        (world.settings)
        (world.syntax (phase syntax)))


;;;
;;;; Game
;;;


(class World-Game extends Object
  
  
  ;;;
  ;;;; Prologue
  ;;;
  
  
  (method (check-prologue (size: size #f))
    (let ((settings (get-settings~ (get-application)))
          (setting-name 'world.last-prologue))
      (let ((last (world-setting setting-name #f)))
        (when (not last)
          (show-prologue size: size)
          (set-setting~ settings setting-name (digest-file (parse~ (prologue-file)) 'SHA-1))
          (save-content~ settings)))))
  
  
  (method (show-prologue (size: size #f))
    (open-world-document (prologue-file) class: World-Formatted-Text-View size: (or size {Dimension 800 600})))
  
  
  (method (prologue-file)
    (let ((zone (current-zone)))
      (zone-brother~ zone "Prologue.ftx")))
  
  
  ;;;
  ;;;; Mouse
  ;;;
  
  
  (method protected virtual (mouse-down h v)
    )
  
  
  (method protected virtual (mouse-moved x y)
    )
  
  
  (method protected virtual (mouse-up h v)
    )
  
  
  (method protected virtual (right-mouse-up h v)
    )
  
  
  (method protected virtual (mouse-wheel h v delta)
    )))
