;;;===============
;;;  WorldScheme
;;;===============
;;;
;;;; World Sections
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2015
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.section jazz


(proclaim (warn optimizations))


(class Section extends Object
  
  
  (slot sector      accessors generate)
  (slot chunk       getter generate)
  (slot blocks      getter generate)
  (slot data        getter generate)
  (slot blocklight  getter generate)
  (slot skylight    getter generate)
  (slot powerlevels getter explicit)
  
  
  (method override (initialize chunk blocks data blocklight skylight)
    (set! sector~self #f)
    (set! chunk~self chunk)
    (set! blocks~self blocks)
    (set! data~self data)
    (set! blocklight~self blocklight)
    (set! skylight~self skylight)
    (set! powerlevels~self #f))
  
  
  (method public (get-powerlevels)
    (or powerlevels
        (let ((vec (make-u8vector 4096 255)))
          (set! powerlevels vec)
          vec)))))
