;;;==============
;;;  JazzScheme
;;;==============
;;;
;;;; Wavefront Obj
;;;


(module world.external.obj jazz


(import (jazz.geometry)
        (jazz.graphic)
        (jazz.graphic.opengl.glew)
        (jazz.io)
        (jazz.library)
        (world.binary)
        (world.dye)
        (world.foreign)
        (world.foreign.obj)
        (world.geometry)
        (world.material)
        (world.model))



;;;
;;;; Obj
;;;


(definition public (load-obj file texture)
  (let ((model (new Model)))
    (let ((mesh (get-mesh~ model)))
      (allocate-vertices~ mesh)
      (set-data~ (get-vertices-buffer~ mesh) (parse-obj (parse~ file)) 9)
      (set-material~ mesh (new Material texture: texture)))
    model)))
