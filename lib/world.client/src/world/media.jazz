;;;===============
;;;  WorldScheme
;;;===============
;;;
;;;; Media
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2018
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.media jazz


;;;
;;;; Codec
;;;


(class Codec extends Object
  
  
  (slot name getter generate)
  (slot kind getter generate)
  
  
  (method override (initialize self name kind)
    (nextmethod self)
    (set! self.name name)
    (set! self.kind kind))
  
  
  (method override (print self output readably)
    (print-unreadable self output
      (lambda (output)
        (format output "{a}" name))))
  
  
  (method protected virtual (buffer-header? self buffer)
    ))


;;;
;;;; Codecs
;;;


(definition protected codecs
  (make-table test: eq?))


(definition public (register-codec codec)
  (table-set! codecs (get-name codec) codec))

(definition public (registered-codec name)
  (table-ref codecs name #f))

(definition public (require-codec name)
  (or (table-ref codecs name #f)
      (error "Unknown codec: {s}" name))))
