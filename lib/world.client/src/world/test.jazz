;;;==============
;;;  JazzScheme
;;;==============
;;;
;;;; World Tests
;;;


(module world.test jazz


(import (jazz.graphic)
        (jazz.graphic.opengl.autoload)
        (jazz.graphic.opengl.glew)
        (jazz.library)
        (jazz.ui)
        (jazz.ui.view)
        (jazz.ui.window)
        (world)
        (world.autoload)
        (world.collision)
        (world.entity)
        (world.generate)
        (world.geometry)
        (world.interface)
        (world.interface.inventory)
        (world.interface.menu)
        (world.light)
        (world.mark)
        (world.material)
        (world.mesh)
        (world.model)
        (world.movement)
        (world.player)
        (world.syntax (phase syntax))
        (world.tile))


(proclaim (warn optimizations))
  

;;;
;;;; Memory
;;;


@memory
(let ((el (new Tile)))
  (time
    (let ((x (+ 2. 1.)))
      #f))
  (time
    (let ((x (+ (get-x~ el) 1.)))
      #f)))


;;;
;;;; Optimizations
;;;


@optimizations (
(vertex 0. 0. 0.)
(make-f64vector 5)
(+ (f64vector-length (make-f64vector 5)) 2)
(f64vector-ref (make-f64vector 5) 2))


;;;
;;;; Types
;;;


@types (
(let ((world (current-world)))
  (rotate-left~ world))

(let ((world (current-world)))
  (+ (get-width~ world) 1.))))
