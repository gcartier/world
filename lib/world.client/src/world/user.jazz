;;;==============
;;;  JazzScheme
;;;==============
;;;
;;;; World User
;;;


(module world.user jazz


(import (jazz.graphic)
        (jazz.library)
        (jazz.ui)
        (jazz.ui.view)
        (jazz.ui.window)
        (world)
        (world.autoload)
        (world.entity)
        (world.generate)
        (world.geometry)
        (world.light)
        (world.material)
        (world.mesh)
        (world.model)
        (world.syntax (phase syntax)))


;;;
;;;; Template
;;;


(definition public (new-template x y z)
  (new Light parent: (current-zone) x: x y: y z: z))


(definition public (set-template-properties light)
  (let ((zone (current-zone)))
    (define (random-part)
      (random-real))
    
    (set-property~ (get-designer~ zone) light 'color (new Color red: (random-part) green: (random-part) blue: (random-part)))
    (invalidate-lightmaps~ zone light))))
