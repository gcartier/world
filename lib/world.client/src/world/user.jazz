;;;==============
;;;  JazzScheme
;;;==============
;;;
;;;; World User
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.user jazz


(import (jazz.graphic)
        (jazz.library)
        (jazz.ui)
        (jazz.ui.view)
        (jazz.ui.window)
        (world)
        (world.autoload)
        (world.dye)
        (world.entity)
        (world.generate)
        (world.geometry)
        (world.light)
        (world.material)
        (world.mesh)
        (world.model)
        (world.syntax (phase syntax)))


;;;
;;;; Template
;;;


(definition public (new-template x y z)
  (new Light parent: (current-zone) position: (vertex x y z)))


(definition public (set-template-properties light)
  (let ((zone (current-zone)))
    (define (random-part)
      (random-real))
    
    (set-property~ (get-designer~ zone) light 'color (dye (random-part) (random-part) (random-part) 1.))
    (invalidate-lightmaps~ zone light))))
