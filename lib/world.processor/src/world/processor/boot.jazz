;;;=========
;;;  Yownu
;;;=========
;;;
;;;; Yownu Boot Processor
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 2012-2018
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):


(module world.processor.boot jazz


(import (world.boot)
        (world.io)
        (world.processor.tier)
        (world.settings)
        (yownu.windows (cond windows)))


(definition protected (boot-processor process-class)
  (load-point 'boot)
  ;; hack around what appears to be a gambit bug that results in ultra
  ;; weird behavior on windows especially for large values like 1000000
  (cond-expand
    (windows)
    (else
     (set-min-heap! (* 1000000 1024))))
  (boot-tier process-class
             start: (lambda ()
                      (setup-processor)
                      (boot-world 'processor "yownu")
                      (ready-processor)))))
